function increaseSpeed(e,t){currentSpeed=e,setTimeout((()=>{currentSpeed=baseSpeed}),t)}function pageStart(){document.addEventListener("startPageAnimation",(()=>{pageStartTl=gsap.timeline(),pageStartTl.to(window.camera.position,{y:0,duration:2.5,ease:"elastic.out(1,0.85)",onComplete:()=>{"function"==typeof enableFrustumCulling&&enableFrustumCulling()}}),pageStartTl.to(".hero-text .char",{scaleY:1,duration:2,stagger:{each:.04,from:"random"},ease:"elastic.out(1,0.75)"},0),pageStartTl.to(".mobile-showreel_gradient",{opacity:.3,duration:.8,ease:"power2.out"},.5),pageStartTl.to(".mobile-sound-button",{opacity:1,duration:.3,ease:"power2.out"},.5),pageStartTl.to(".showreel",{height:"100%",duration:.8,opacity:1,ease:"power3.out"},.5),pageStartTl.to(".frame-line.is--vert",{scaleY:1,duration:.8,ease:"power4.out"},.5),pageStartTl.to(".frame-line.is--mid, .frame-line.is--menu",{scaleX:1,duration:.8,ease:"power4.out"},.5),pageStartTl.to(".frame-top-bot_flex",{scaleX:1,duration:.8,ease:"power4.out"},.5),pageStartTl.to(".mobile-heading .h4",{opacity:1,duration:1.8,stagger:{each:.1,from:"random"},ease:"elastic.out(1,0.1)"},"<"),pageStartTl.to(".menu_wrapper, .menu-flex",{opacity:1,y:"0%",duration:.8,ease:"power4.out"},"<0.4"),pageStartTl.to(".angle-cross",{opacity:1,duration:.3,ease:"power2.out"},"<"),pageStartTl.to(".cta-btn-wr",{opacity:1,duration:1,x:"0%",ease:"power4.out"},"<")})),globalState.isMobile&&(document.dispatchEvent(new Event("startPageAnimation")),gsap.set(".hero-text",{opacity:1}))}function homeAnimations(){function e(){document.querySelectorAll(".price-text:not(.cc--price)").forEach((e=>{const t=e.textContent.split(""),o=new Set;for(;o.size<3;){const e=Math.floor(Math.random()*t.length);o.add(e)}o.forEach((e=>{t[e]=`<span class="gridular">${t[e]}</span>`}));const r=t.join("");e.innerHTML=r}))}if(gsap.to("[shrink]",{scaleY:.6,lineHeight:"0.6em",y:globalState.isDesktop?"50%":"0%",scrollTrigger:{trigger:"[shrink]",start:"top top",end:"bottom 10%",scrub:1.5,self:!0}}),globalState.isDesktop){gsap.set(".cases-wr, .button-perspective",{perspective:200});let e=cases.length,o=37.5*e,r=190*e,a=[-80,-70,-50,30,70,80],s=[-42,-50,80,-105,140,-75,-130,140];gsap.set(".cases-track",{height:`${o}vh`}),gsap.set(".button-perspective .button-halo",{opacity:0,z:-250}),cases.forEach(((t,o)=>{var n=gsap.utils.mapRange(e,0,-.3,1),i=gsap.utils.mapRange(0,e,0,18);let l=a[o%a.length],p=s[o%s.length];gsap.set(t,{z:180*-o+10,xPercent:p,yPercent:l,filter:`blur(${i(o)}px)`,opacity:n(o)});var c=gsap.timeline({defaults:{ease:"linear"},scrollTrigger:{trigger:".cases-track",start:"400px bottom",end:"bottom bottom",scrub:1}});c.to(t,{z:"+="+r,duration:1}),c.to(t,{opacity:"+=1.4",filter:`blur(${i(o)-19}px)`,duration:1},0)}));var t=gsap.timeline({defaults:{ease:"linear"},scrollTrigger:{start:"30% bottom",end:"bottom bottom",scrub:1,trigger:".cases-track"}});t.to(".button-perspective .button-halo",{opacity:1,duration:2}),t.to(".button-perspective .button-halo",{z:80,duration:5},"<"),t.to(".button-perspective .button-halo",{xPercent:130,yPercent:-140,duration:4.5,delay:.5},"<")}const o=new Swiper(".cc--stories_thumbs",{spaceBetween:0,slidesPerView:1,height:34,slideNextClass:"thumb-next",slidePrevClass:"thumb-prev",grabCursor:!0,virtualTranslate:!0,direction:"vertical",a11y:{slideRole:"button"}}),r=new Swiper(".cc--story_quotes",{loop:!0,slidesPerView:1,allowTouchMove:!1,direction:"vertical",speed:600,a11y:{slideRole:"listitem"}}),a=new Swiper(".story-swiper",{loop:!0,effect:"cube",grabCursor:!0,speed:500,a11y:{slideRole:"listitem"},autoplay:!1,cubeEffect:{slideShadows:!0,shadowOffset:20,shadowScale:.94},navigation:{nextEl:".slider-button.cc--next",prevEl:".slider-button.cc--prev"},pagination:{el:".swiper-counter",type:"fraction",formatFractionCurrent:function(e){return e<10?"0"+e:e},formatFractionTotal:function(e){return e<10?"0"+e:e}},thumbs:{swiper:o},on:{slideChange:function(){gsap.killTweensOf(".userpic-progress circle");const e=gsap.timeline({paused:!0});gsap.set(".userpic-progress circle",{strokeDashoffset:242}),setTimeout((()=>{const t=this.activeIndex,o=(this.thumbs.swiper,document.querySelector(".swiper-slide-thumb-active").querySelector(".userpic-progress circle")),r=this.slides[t];e.fromTo(r.querySelector(".story-progress_progress"),{width:"0%"},{duration:4,width:"100%",ease:"linear"}),e.fromTo(o,{strokeDashoffset:242},{duration:4,strokeDashoffset:0,ease:"linear"},0)}),100),ScrollTrigger.create({trigger:".story-swiper",start:"top 80%",onEnter:()=>{a.autoplay.start(),e.play()},onLeaveBack:()=>{a.autoplay.stop(),e.pause()},onEnterBack:()=>{a.autoplay.start(),e.play()}}),this.slides.forEach((e=>{const t=e.querySelector("video");t&&!t.paused&&t.currentTime>0&&t.pause()}));const t=this.slides[this.activeIndex].querySelector("video");t&&t.play().then((()=>{t.currentTime=0})).catch((()=>{}))}}});a.controller.control=r;const s=document.querySelector(".price-move"),n=s.offsetHeight;gsap.timeline({scrollTrigger:{trigger:".section.is--price",start:(globalState.isDesktop,"700 bottom"),endTrigger:".footer-coll",end:globalState.isDesktop?"900 bottom":"200 bottom",scrub:.5}}).to(s,{top:globalState.isDesktop?.6*-n:.2*-n,z:globalState.isDesktop?-250:-100,ease:"linear"}),e();const i=gsap.timeline({scrollTrigger:{trigger:".cc--countdown",start:"bottom 75%",end:"bottom center",scrub:2}});i.to(".cc--countdown",{text:"2..."}),i.to(".cc--countdown",{text:"1..."}),i.to(".cc--countdown",{text:"GO"}),window.onload=()=>{setTimeout((()=>{if(document.querySelectorAll("[award-count]").forEach((e=>{const t=e.getAttribute("award-count"),o=e.querySelectorAll(".project-to-count").length,r=String(o).padStart(2,"0"),a=document.querySelector(`[award-paste="${t}"]`);if(a){const e=a.querySelector(".award-number");e&&(e.textContent=r)}})),globalState.isDesktop){const e=document.querySelector(".awards-sticky").offsetHeight;document.querySelector(".awards-track").style.height=`calc(${e}px + 1200px)`;const t=gsap.timeline({defaults:{ease:"linear"},scrollTrigger:{trigger:".awards-track",start:"top top",end:"+=1000",scrub:1}});t.from(".awards-sticky",{opacity:0,filter:"blur(20px)",duration:1}),t.from(".awards-sticky",{scale:.25,duration:2},"<");gsap.utils.toArray(".awards-heading").forEach((e=>{t.add(typewriter(e),.4)}))}}),1500)},globalState.isMobile&&(gsap.to(".get-down .char",{y:"0%",opacity:1,duration:1,ease:"power2.out",scrollTrigger:{trigger:"#mobile-footer",start:"top bottom"},stagger:{from:"random",amount:.3}}),gsap.utils.toArray(".case").forEach((e=>{gsap.set(e,{scaleY:1.2,opacity:1,y:"17%"}),gsap.to(e,{scaleY:1,y:"0%",ease:"power3.out",duration:1.5,scrollTrigger:{trigger:e,start:"top 90%",toggleActions:"restart none none none"}})})));const l=gsap.timeline({paused:!0});l.to(".sound-icon_line",{duration:.5,scaleY:"random(2, 3)",ease:"sine.inOut",stagger:{each:.05,repeat:-1,yoyo:!0}});const p=document.querySelector(".showreel");if(document.querySelectorAll('[purpose="sound"]').forEach((e=>{e.addEventListener("click",(function(){const t=e.querySelector(".button-text");p&&(globalState.isMobile&&(p.muted?l.play():l.progress(0).then(l.pause())),p.muted=!p.muted,t&&(t.textContent=p.muted?"Sound On":"Sound Off"))}))})),globalState.isDesktop){gsap.set('[purpose="sound"]',{x:"50vw",y:"50vh"});const e=e=>{const t=e.clientX,o=e.clientY;gsap.to('[purpose="sound"]',{duration:0,x:t,y:o,ease:"power3.out"})},t=()=>{gsap.set('[purpose="sound"]',{display:"block"}),gsap.to('[purpose="sound"]',{duration:.3,scale:1,opacity:1,overwrite:!0,ease:"power3.out"}),gsap.to('[purpose="sound"]',{duration:.3,scale:.8,opacity:0,delay:.8,ease:"power3.in",onComplete:()=>gsap.set('[purpose="sound"]',{display:"none"})})};gsap.to(".frame, .cta-btn-wr, .flex-inbetween.cc--top, .frame-bottom",{autoAlpha:0,scrollTrigger:{trigger:".video-trigger",start:"top 40%",end:"bottom 60%",toggleActions:"play reverse play reverse",onEnter:()=>{const o=document.querySelector(".video-trigger_wr"),r=document.querySelector(".video-trigger");o.addEventListener("mousemove",e),r.addEventListener("mousemove",t)},onLeave:()=>{const o=document.querySelector(".video-trigger_wr"),r=document.querySelector(".video-trigger");o.removeEventListener("mousemove",e),r.removeEventListener("mousemove",t),gsap.to('[purpose="sound"]',{duration:.3,scale:.8,opacity:0,ease:"power3.in",onComplete:()=>gsap.set('[purpose="sound"]',{display:"none"})})},onEnterBack:()=>{const o=document.querySelector(".video-trigger_wr"),r=document.querySelector(".video-trigger");o.addEventListener("mousemove",e),r.addEventListener("mousemove",t)},onLeaveBack:()=>{const o=document.querySelector(".video-trigger_wr"),r=document.querySelector(".video-trigger");o.removeEventListener("mousemove",e),r.removeEventListener("mousemove",t),gsap.to('[purpose="sound"]',{duration:.3,scale:.8,opacity:0,ease:"power3.in",onComplete:()=>gsap.set('[purpose="sound"]',{display:"none"})})}}}),ScrollTrigger.create({trigger:".video-trigger",start:"top 30%",onEnter:()=>{t()},onLeave:()=>{gsap.to('[purpose="sound"]',{duration:.3,scale:.8,opacity:0,ease:"power3.in",onComplete:()=>gsap.set('[purpose="sound"]',{display:"none"})})}}),ScrollTrigger.create({trigger:".cases-track",start:"top top",onEnter:()=>{gsap.set('[purpose="sound"]',{display:"none"})}})}ScrollTrigger.create({trigger:globalState.isDesktop?".video-trigger":".showreel",start:"top bottom",onLeave:()=>p.pause(),onEnterBack:()=>p.play()});document.querySelectorAll(".carousel").forEach((e=>{const t=gsap.timeline({repeat:-1,scrollTrigger:{trigger:e,start:"top bottom",end:"top top",toggleActions:"play pause play pause"},onRepeat:()=>{t.time(.8)}}),o=e.querySelectorAll("[carousel]");let r=0;o.forEach(((e,o)=>{const a=e.querySelectorAll(".char"),s=gsap.timeline();s.to(e,{delay:1}),s.carousel(a,{delay:1}),o>0?t.add(s,"-="+s.totalDuration()/2):t.add(s,"-=2"),r+=s.totalDuration()}))})),gsap.to("[creative] .char",{opacity:1,y:"0%",duration:1,ease:"power2.out"}),gsap.to("[creative] .char",{opacity:0,y:function(){return Math.random()<.5?"-80%":"80%"},ease:"power2.out",scrollTrigger:{trigger:".video-trigger",start:"top bottom",end:"40% bottom",scrub:1.5}});gsap.timeline({scrollTrigger:{trigger:"[hero-stagger-1]",start:"top 60%",end:"top 40%",scrub:1.5}}).randomStaggerIn("[hero-stagger-1] .char");gsap.timeline({defaults:{overwrite:!0},scrollTrigger:{trigger:"[hero-stagger-1]",start:"top top",end:"top -20%",scrub:1.5}}).randomStaggerOut("[hero-stagger-1] .char");gsap.timeline({scrollTrigger:{trigger:"[hero-stagger-2]",start:"top 90%",end:"top 70%",scrub:1.5}}).randomStaggerIn("[hero-stagger-2] .char");gsap.timeline({defaults:{overwrite:!0},scrollTrigger:{trigger:"[hero-stagger-2]",start:"top 20%",end:"top top",scrub:1.5}}).randomStaggerOut("[hero-stagger-2] .char"),gsap.set(".service-text",{display:"none"}),document.querySelectorAll(".service").forEach((e=>{let t=gsap.timeline({onComplete:()=>{t.restart()}});e.querySelectorAll(".service-text").forEach((e=>{let o=Array.from(e.querySelectorAll(".char")),r=e.querySelectorAll(".type-underline");const a=gsap.timeline();a.to(e,{display:"block"}).set(r,{display:"block"}).typeWr(o).set(r,{display:"none"}).to(e,{delay:2}).typeWr(o).reverse().to(e,{display:"none"}),a.pause(),a.play(),t.add(a,"-=0.5")}))}));bodymovin.loadAnimation({container:document.querySelector(".waveform-container"),renderer:"canvas",loop:!0,autoplay:!0,path:"https://cdn.prod.website-files.com/64354a08ff4dd15c2539372b/66d1d7b3c03b9dda5b184ca6_new_waveform-AQ6iX.json"})}function awards3d(){function e(e){let t=e.clientX;c=p(t),gsap.to(a.rotation,{y:c,ease:"power2",duration:3.5})}function t(){i=gsap.timeline({paused:!0,onReverseComplete:()=>{o(),popupOpen.reverse(),document.removeEventListener("mousemove",e)}}),i.to(n.position,{z:0,duration:2,ease:"power3.out"}),i.to(n.rotation,{x:0,duration:2,ease:"power1.out",delay:.45},0),i.to(n.position,{y:0,duration:2,ease:"power1.out"},"<"),a.children.forEach((e=>{e.children.forEach((e=>{e.children.forEach(((e,t)=>{const o=.05*t;i.from(e.scale,{y:.5,duration:1.5,ease:"power3.out"},o),e.children.forEach((e=>{i.to(e.material,{opacity:1,duration:1,ease:"power3.out"},o)}))}))}))}))}function o(){n&&(scene.remove(n),n.traverse((e=>{e.isMesh&&(e.geometry.dispose(),e.material.dispose())})),a.children.forEach((e=>{e.traverse((e=>{e.position.set(0,0,0),e.rotation.set(0,0,0),e.scale.set(1,1,1)}))})),s.forEach((e=>e.kill())),s=[],l=0,n=null,a=null)}const r=document.querySelectorAll("[purpose='awards']");let a=null,s=[],n=null,i=null,l=0;const p=gsap.utils.mapRange(0,window.innerWidth,-Math.PI/2,Math.PI/2);let c=0;r.forEach((o=>{o.addEventListener("click",(()=>{function o(e){const t=new THREE.MeshBasicMaterial({map:e,side:THREE.DoubleSide,transparent:!0,opacity:0}),o=1.7,r=o/(e.image.width/e.image.height),a=new THREE.PlaneGeometry(o,r);return{plane:new THREE.Mesh(a,t),height:r}}function r(e){let t=0;for(let r=0;r<d;r++){const a=new THREE.Group;let n=0;for(let e=0;e<u;e++){const t=(r*u+e)%y.length,{plane:s,height:i}=o(y[t]),l=e*m;s.position.x=g*Math.cos(l),s.position.z=g*Math.sin(l),s.lookAt(new THREE.Vector3(0,0,0));const p=new THREE.Group;p.add(s),a.add(p),i>n&&(n=i)}a.position.y=-t,t+=n+.15,a.position.z=0,e.add(a),l+=n;const i=r%2==0?1:-1;s.push(p(a,i))}}function p(e,t){return gsap.to(e.rotation,{y:"+="+6.28319*t,duration:80,repeat:-1,ease:"none"})}if(gsap.to(".awards-trigger",{autoAlpha:1,duration:.3,display:"block"}),n)return;increaseSpeed(.2,1200);const c=document.querySelectorAll(".award-image"),u=24,d=4,g=7,m=2*Math.PI/u,y=[];a=new THREE.Group,n=new THREE.Group;const h=new THREE.Group;c.forEach((e=>{(new THREE.TextureLoader).load(e.src,(e=>{if(y.push(e),y.length===c.length){r(h);const e=h.clone();e.position.y=-l-.57,a.add(h),a.add(e),a.position.y=l/4,s.push(gsap.to(a.position,{y:l/.57,ease:"none",scrollTrigger:{trigger:".awards-popup_track",scroller:".awards-trigger",start:"top top",end:"bottom bottom",scrub:7}})),a.position.z=3,n.rotation.x=-Math.PI/2,n.position.z=-100,n.position.y=-3,n.add(a),scene.add(n),t(),h.children.forEach(((e,t)=>{const o=t%2==0?1:-1;s.push(p(e,o))})),e.children.forEach(((e,t)=>{const o=t%2==0?1:-1;s.push(p(e,o))})),popupOpen&&"function"==typeof popupOpen.play&&popupOpen.play(),i&&"function"==typeof i.play&&i.play()}}))})),document.addEventListener("mousemove",e)}))}));document.querySelector(".awards-close").addEventListener("click",(()=>{popupOpen&&"function"==typeof popupOpen.reverse&&i.timeScale(2).reverse(),gsap.to(".awards-trigger",{autoAlpha:0,duration:0,display:"none"})}))}const progressNumbers=document.querySelector(".preloader-numbers");let initProgTl;if(globalState.isDesktop){gsap.set(".preloader",{opacity:1});const e=bodymovin.loadAnimation({container:document.querySelector(".preloader_lottie"),renderer:"canvas",loop:!1,autoplay:!1,path:"https://uploads-ssl.webflow.com/64354a08ff4dd15c2539372b/66b95c598d08b3a0083f8b13_loader.json"});initProgTl=gsap.timeline(),initProgTl.to(progressNumbers,{textContent:20,duration:.8,ease:Power1.easeIn,snap:{textContent:1},stagger:.04,onUpdate:function(){progressNumbers.textContent=String(Math.floor(this.targets()[0].textContent)).padStart(3,"0")}});let t,o,r={frame:1},a=!1;const s=gsap.timeline({paused:!0});s.to(r,{frame:63,duration:2,ease:"none",onUpdate:()=>{e.goToAndStop(r.frame,!0)},onComplete:()=>{a?(gsap.set(r,{frame:148}),o.play()):t.play()}}),t=gsap.timeline({paused:!0}),t.to(r,{frame:148,duration:2.6,ease:"none",onUpdate:()=>{e.goToAndStop(r.frame,!0)},onComplete:()=>{a?(gsap.set(r,{frame:148}),o.play()):(gsap.set(r,{frame:63}),t.restart())}}),o=gsap.timeline({paused:!0}),o.to(r,{frame:243,duration:2.5,ease:"none",onStart:()=>{gsap.to(progressNumbers,{opacity:0,scaleY:.2,duration:.6,ease:"power3.in",delay:.2}),increaseSpeed(.2,1700)},onUpdate:()=>{e.goToAndStop(r.frame,!0)},onComplete:()=>{ScrollTrigger.refresh(),document.dispatchEvent(new Event("startPageAnimation")),gsap.set(".preloader",{display:"none"}),gsap.set("body",{overflow:"auto"}),gsap.to(".container:not(.hero-sticky .container), .awards-track, .footer-anim",{opacity:1,duration:.2})}}),e.addEventListener("DOMLoaded",(function(){s.play(),gsap.set(".hero-text",{opacity:1})})),loadingManager.onStart=function(){a=!1},loadingManager.onLoad=function(){a=!0}}addEventListener("DOMContentLoaded",(()=>{globalState.isDesktop&&(initProgTl.pause(),loadScript("https://assets.slater.app/slater/4562/19931.js",(function(){desktop3d(),loadingManager.onProgress=function(e,t,o){const r=Math.round(t/o*80)+20,a=String(r).padStart(3,"0");progressNumbers.textContent=a}}))),pageStart(),homeAnimations(),awards3d()}));