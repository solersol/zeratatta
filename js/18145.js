function typewriter(e){let t=Array.from(e.querySelectorAll(".char")),o=e.querySelectorAll(".type-underline");var r=gsap.timeline();return r.to(o,{display:"block",duration:0}),r.to(e,{opacity:1,duration:0}),r.typeWr(t),r.to(o,{display:"none",duration:0}),r}function splitType(){function e(e,t){for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()_+",r="",n=0;n<t.length;n++){var a=Math.floor(Math.random()*o.length);r+=o.charAt(a)}e.textContent=r}if(globalState.isMobile&&menuLinks.forEach((function(e){e.removeAttribute("typewriter","on"),e.setAttribute("carousel","")})),gsap.set(".rt",{opacity:1}),globalState.isDesktop){document.querySelectorAll(".case .p-large, .case .case-year").forEach((function(e){e.setAttribute("split-type","on"),e.setAttribute("typewriter","on")}));document.querySelectorAll(".button-text").forEach((function(e){e.setAttribute("split-type","on")}));document.querySelectorAll(".button-text_wr").forEach((function(e){e.setAttribute("typewriter","on")}))}document.querySelectorAll('[typewriter="on"]').forEach((e=>{e.querySelectorAll('[split-type="on"]').forEach((function(e){var t=document.createElement("div");t.classList.add("type-underline"),e.appendChild(t)})),e.style.position="relative";const t=e.firstElementChild;if(t&&!e.querySelector(".typewriter-clone")){const o=document.createElement("div");o.innerHTML=t.innerHTML,t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.zIndex="2",o.style.position="static",o.style.opacity="0",o.style.marginTop="0",o.style.marginRight="0.5em",o.classList.add("typewriter-clone"),e.appendChild(o)}}));new SplitType("[split-type]",{types:"lines, chars"}),new SplitType("[split-line]",{types:"lines"});document.querySelectorAll("[split-line]").forEach((e=>{e.querySelectorAll(".line").forEach((e=>{const t=document.createElement("div");t.classList.add("u--overflow"),e.parentNode.insertBefore(t,e),t.appendChild(e)}))}));document.querySelectorAll("[split-line-general]").forEach((e=>{const t=e.querySelectorAll(".line");gsap.timeline({scrollTrigger:{trigger:e,start:"top 90%",toggleActions:"restart none none reset"}}).from(t,{y:"100%",stagger:.1,duration:1,ease:"power4.out"})})),gsap.set("[random-stagger]",{opacity:1}),gsap.set("[random-stagger] .char",{y:function(){return Math.random()<.5?"-80%":"80%"},opacity:0}),gsap.registerEffect({name:"randomStaggerIn",effect:e=>{const t=gsap.timeline();return t.to(e,{y:"0%",opacity:1,duration:1,ease:"power2.out",stagger:{from:"random",amount:.3}}),t},extendTimeline:!0}),gsap.registerEffect({name:"randomStaggerOut",effect:e=>{const t=gsap.timeline();return t.to(e,{y:function(){return Math.random()<.5?"-80%":"80%"},opacity:0,ease:"power2.in",duration:1,stagger:{from:"random",amount:.3}}),t},extendTimeline:!0}),document.querySelectorAll("[stagger-general]").forEach((e=>{ScrollTrigger.create({trigger:e,start:"top 80%",end:"top 5%",onEnter:()=>{gsap.effects.randomStaggerIn(e.querySelectorAll(".char"))},onLeave:()=>{gsap.effects.randomStaggerOut(e.querySelectorAll(".char"))},onEnterBack:()=>{gsap.effects.randomStaggerIn(e.querySelectorAll(".char"))},onLeaveBack:()=>{gsap.effects.randomStaggerOut(e.querySelectorAll(".char"))}})})),gsap.set('[typewriter="on"]',{opacity:1});const t=.07;gsap.registerEffect({name:"typeWr",effect:o=>{const r=gsap.timeline();return o.forEach(((o,n)=>{const a=o.textContent.trim(),i=gsap.timeline();i.to(o,{text:a,duration:0}),i.from(o,{display:"none",duration:t}),i.call(e,[o,a],"<"),i.to(o,{text:a,duration:t});const l=n>1?"=-"+1.6*t:0;r.add(i,l)})),r},defaults:{},extendTimeline:!0});const o=gsap.timeline({repeat:-1});o.to(".type-underline",{opacity:1,duration:.1}),o.to(".type-underline",{opacity:0,duration:.1}),gsap.set('[typewriter-general="on"]',{opacity:0}),document.querySelectorAll('[typewriter-general="on"]').forEach((e=>{let t=typewriter(e);ScrollTrigger.create({trigger:e,start:"top 80%",end:"top 2%",animation:t,toggleActions:"play reverse play reverse"})})),gsap.set("[carousel] .char",{rotateX:90,y:"-50%",opacity:0}),gsap.set("[carousel]",{opacity:1}),gsap.registerEffect({name:"carousel",effect:(e,t)=>{const{delay:o}=t,r=gsap.timeline({defaults:{duration:.8,stagger:.08}});return r.to(e,{rotateX:0,y:"0%"}),r.to(e,{opacity:1,ease:"power4.in",duration:.1},0),r.to(e,{rotateX:-90,y:"50%"},`+=${o}`),r.to(e,{opacity:0,duration:.2,ease:"power4.in"},"-=100%"),r},defaults:{delay:1},extendTimeline:!0}),document.querySelectorAll("[carousel-general]").forEach((e=>{var t=e.querySelectorAll(".char"),o=gsap.timeline({scrollTrigger:{trigger:e,start:"top bottom",end:"top top",marker:!0,onEnter:()=>{o.play(0);var e=o.totalDuration()/2;o.addPause(e)},onLeave:()=>{var e=o.totalDuration()/2;o.play(e)},onEnterBack:()=>{o.play(0);var e=o.totalDuration()/2;o.addPause(e)},onLeaveBack:()=>{var e=o.totalDuration()/2;o.play(e)}}});o.carousel(t,{delay:0})}))}function basicScene(){const e=document.querySelector(".webgl"),t={width:window.innerWidth,height:window.innerHeight};window.camera=new THREE.PerspectiveCamera(30,t.width/t.height),window.scene=new THREE.Scene,window.addEventListener("resize",(()=>{t.width=window.innerWidth,t.height=window.innerHeight,window.camera.aspect=t.width/t.height,window.camera.updateProjectionMatrix(),renderer.setSize(t.width,t.height);const e=window.devicePixelRatio||1;renderer.setPixelRatio(Math.min(e,1.5))})),window.scene.add(window.camera),window.camera.position.set(0,0,3),window.renderer=new THREE.WebGLRenderer({canvas:e,antialias:!0}),renderer.setSize(t.width,t.height),renderer.setClearColor(0,0),window.textureLoader=new THREE.TextureLoader(loadingManager);const o=window.textureLoader.load("https://uploads-ssl.webflow.com/64354a08ff4dd15c2539372b/66619dfec902c925b6d91ed6_particle.webp"),r=new THREE.PointsMaterial({color:"rgb(255, 255, 255)",size:.08,map:o,transparent:!0,blending:THREE.AdditiveBlending,transparent:!0}),n=7500,a=53,i=new Float32Array(3*n);for(let e=0;e<n;e++){const t=(Math.random()-.5)*a,o=(Math.random()-.5)*a,r=(Math.random()-.5)*a;i[3*e]=t,i[3*e+1]=o,i[3*e+2]=r}const l=new THREE.BufferGeometry;l.setAttribute("position",new THREE.BufferAttribute(i,3));const s=new THREE.Points(l,r);s.name="particleSys",window.scene.add(s);let c=.02;const d=.3;let p=gsap.utils.clamp(.01,d);ScrollTrigger.create({onUpdate:e=>{const t=e.getVelocity()/1e3,o=p(t*.07),r=gsap.utils.snap(currentSpeed,o,.5);c=r}}),gsap.ticker.add((()=>{c+=.1*(currentSpeed-c);for(let e=0;e<i.length;e+=3)i[e+2]+=c,i[e+2]>40&&(i[e+2]=-20);s.geometry.attributes.position.needsUpdate=!0}));const u=()=>{renderer.render(window.scene,window.camera),globalState.isDesktop&&window.videoTexture&&(window.videoTexture.needsUpdate=!0),window.requestAnimationFrame(u)};u()}function onLoadSetup(){const e=document.querySelectorAll(".astro-vid_link"),t=document.querySelectorAll(".astro-vid_link_mac"),o=Array.from(e).map((e=>e.textContent.trim())),r=Array.from(t).map((e=>e.textContent.trim()));document.querySelectorAll(".astronaut-vid").forEach((e=>{const t=o[Math.floor(Math.random()*o.length)],n=r[Math.floor(Math.random()*r.length)],a=e.querySelectorAll("source");a[0]&&a[0].setAttribute("src",t),a[1]&&a[1].setAttribute("src",n),e.load()}));document.querySelectorAll(".awards-projects .service-text").forEach(((e,t)=>{const o=e.querySelector(".awards-project_number");if(o){const e=String(t+1).padStart(2,"0");o.textContent=e}}))}function animations(){const e=document.querySelector(".cta-btn-wr .button-halo"),t=e.offsetWidth,o=gsap.timeline({paused:!0,repeat:-1,defaults:{ease:"none"}});o.to(e,{x:-.6*window.innerWidth+t,y:-1*window.innerHeight+t,rotateZ:-60,duration:8}),o.to(e,{x:-1*window.innerWidth+t,y:-.4*window.innerHeight+t,rotateZ:-92,duration:5}),o.to(e,{x:-.6*window.innerWidth+t,y:-.2*window.innerHeight+t,rotateZ:-170,duration:6}),o.to(e,{x:-.05*window.innerWidth+t,y:-.8*window.innerHeight+t,rotateZ:-24,duration:7}),o.to(e,{x:-.5*window.innerWidth+t,y:-1*window.innerHeight+t,rotateZ:36,duration:5}),o.to(e,{x:0,y:0,rotateZ:0,duration:6});let r=!1;if(ScrollTrigger.create({trigger:"body",start:"99.5% bottom",end:"bottom top",onEnter:()=>{o.play(),r=!0},onEnterBack:()=>{o.play(),r=!0},onLeave:()=>{o.pause(),r=!1,gsap.to(e,{x:0,y:0,rotateZ:0,duration:3,ease:"none",onComplete:()=>o.progress(0)})},onLeaveBack:()=>{o.pause(),r=!1,gsap.to(e,{x:0,y:0,rotateZ:0,duration:3,ease:"none",onComplete:()=>o.progress(0)})}}),e.addEventListener("mouseenter",(()=>{r&&o.pause()})),e.addEventListener("mouseleave",(()=>{r&&o.resume()})),document.querySelectorAll("[copy-mail]").forEach((function(e){e.addEventListener("click",(function(){const t=e.getAttribute("mail");t&&navigator.clipboard.writeText(t).catch((function(){}))}))})),globalState.isDesktop){cases.forEach((e=>{const t=gsap.timeline({paused:!0}),o=e.querySelectorAll("[typewriter=on]"),r=e.querySelectorAll(".additional-text"),n=gsap.timeline({paused:!0,defaults:{duration:.5,ease:"power3.inOut"}}),a=18,i=0;n.to(e.querySelectorAll(".corner"),{opacity:1,duration:.05,ease:"none"},.2),n.to(e.querySelectorAll(".corner"),{opacity:0,duration:.05,ease:"none"}),n.to(e.querySelectorAll(".corner"),{opacity:1,duration:.05,ease:"none"}),n.to(e.querySelectorAll(".corner"),{opacity:0,duration:.05,ease:"none"}),n.to(e.querySelectorAll(".corner"),{opacity:1,duration:.05,ease:"none"}),n.to(e.querySelector(".corner.first"),{x:-a,y:-a},i),n.to(e.querySelector(".corner.second"),{x:a,y:-a},i),n.to(e.querySelector(".corner.third"),{x:-a,y:a},i),n.to(e.querySelector(".corner.forth"),{x:a,y:a},i),o.forEach((e=>{t.add(typewriter(e)),t.to(r,{color:"#ffffff",duration:.2},0)})),e.addEventListener("mouseenter",(()=>{e.classList.add("case-hovered"),t.play(),n.play()})),e.addEventListener("mouseleave",(()=>{e.classList.remove("case-hovered"),t.timeScale(1.5).reverse(),n.reverse()}))})),gsap.utils.toArray(".case-element").forEach((e=>{const t=e.querySelector(".case-blur");gsap.set(t,{xPercent:-50,yPercent:-50}),e.addEventListener("mouseenter",(o=>{e.getBoundingClientRect();gsap.set(t,{x:o.offsetX,y:o.offsetY}),gsap.to(t,{scale:1,duration:.3});const r=e=>{gsap.to(t,{x:e.offsetX,y:e.offsetY,duration:1.5})};e.addEventListener("mousemove",r),r(o)})),e.addEventListener("mouseleave",(()=>{gsap.to(t,{scale:0,duration:.3})}))}))}}function mobileMenu(){if(globalState.isMobile){const e=gsap.timeline({paused:!0});e.to(".cta-btn-wr",{autoAlpha:0,duration:.3}),ScrollTrigger.create({animation:e,trigger:"body",endTrigger:"#mobile-footer",start:"300px top",end:"top bottom",toggleActions:"play reverse play reverse"});const t=gsap.timeline({paused:!0,onReverseComplete:()=>{o.pause()}});t.to(".menu_wrapper",{display:"flex",autoAlpha:1,duration:.2}),menuLinks.forEach(((e,o)=>{var r=e.querySelectorAll(".char"),n=gsap.timeline({paused:!0});n.carousel(r);const a=n.duration()/2,i=gsap.timeline();i.add(n.tweenFromTo(0,a)),t.add(i.timeScale(2),""+.1*o)})),t.from(".menu-links_wr .mobile_footer-line",{x:"-100%",stagger:.1,ease:"power3.out",duration:1.5},0),t.from(".ufo",{opacity:0,scale:.5,duration:.3},0),t.to(".menu-btn_text-top",{y:"-100%",opacity:0,ease:"power3.inOut",duration:1},0),t.to(".menu-btn_text-bottom",{y:"0%",opacity:1,ease:"power3.inOut",duration:1},0),t.to(".menu-line.top",{y:3,rotateZ:-18,ease:"power3.inOut",duration:1},0),t.to(".menu-line.bottom",{y:-2.6,rotateZ:18,ease:"power3.inOut",duration:1},0);gsap.utils.toArray(".menu_wrapper [typewriter=on]").forEach((e=>{t.add(typewriter(e),0)}));const o=gsap.timeline({paused:!0,repeat:-1,defaults:{duration:3,ease:"power2.inOut"}});o.to(".ufo",{xPercent:-100,x:"100vw",y:"10rem",top:"0%",duration:3.5}),o.to(".ufo",{xPercent:0,x:"0vw",y:"22rem",top:"0%"}),o.to(".ufo",{xPercent:-50,x:"50vw",y:"-5.7rem",top:"100%"}),o.to(".ufo",{xPercent:-100,x:"100vw",y:"-42vh",top:"100%"}),o.to(".ufo",{xPercent:0,x:"0vw",y:"-11rem",top:"100%"});const r=document.querySelector(".menu-button");let n=!0;r.addEventListener("click",(()=>{n?(t.play(),o.play(),e.reverse(),document.querySelector("body").classList.add("no-scroll")):(t.timeScale(1.5).reverse(),e.play(),document.querySelector("body").classList.remove("no-scroll")),n=!n})),menuLinks.forEach((e=>{e.addEventListener("click",(()=>{r.click()}))})),gsap.from(".mobile-footer_heading",{opacity:0,ease:"power2.out",scrollTrigger:{trigger:".mobile-footer_heading",start:"top 85%",end:"top 60%",scrub:!0}});const a=gsap.timeline({paused:!0,onReverseComplete:()=>gsap.set(i,{display:"none"})}),i=document.querySelector(".mobile-tooltip"),l=document.querySelector(".mobile-tooltip .flex-center"),s=document.querySelector(".copy-icon");a.to(i,{display:"block",autoAlpha:1,duration:.3}),a.add(typewriter(l),.1),s.addEventListener("click",(()=>{a.play(),setTimeout((()=>{a.reverse()}),2e3)}))}}function contactForm(){function e(){var e=document.querySelectorAll(".swiper-pagination-bullet"),r=$(".form-content-wr .form-step");if($(".swiper-pagination-bullet .pagination-text").each((function(e){var t=r.eq(e).text();$(this).text(t)})),e[0].classList.add("viewed"),!o){t.allowSlideNext=!1,o=!0,gsap.set("[typewriter-form]",{opacity:1});gsap.utils.toArray("[typewriter-form]").forEach((e=>{typewriter(e)})),gsap.to(".form-flex-left.cc--first",{opacity:1,duration:.3})}}var t=new Swiper(".form-wr",{slidesPerView:1,slidesPerGroup:1,allowTouchMove:!1,navigation:{nextEl:".next-slide",prevEl:".slider-prev"},on:{slideChange:function(){const e=document.querySelector(".slider-prev");0===this.activeIndex?e.style.display="none":e.style.display=""}},pagination:{el:".swiper-pagination",clickable:!0,renderBullet:function(){return'\n        <div class="swiper-pagination-bullet">\n          <div class="pagination-tooltip">\n            <div class="p-small pagination-text">Project Type</div>\n            <div class="tooltip-tail"></div>\n          </div>\n          <div class="pagination-progress-wr">\n            <div class="pagination-progress"></div>\n          </div>\n        </div>'}}});0===t.activeIndex&&(document.querySelector(".slider-prev").style.display="none"),$(".slider-next").on("click",(function(){var e=$(this).find('input[type="radio"]');return e.length?e.prop("checked",!0).trigger("change"):t.slideNext(),!1})),$('.slider-next input[type="radio"]').on("change",(function(){t.slideNext()})),t.on("slideChange",(function(){document.querySelectorAll(".swiper-pagination-bullet").forEach((function(e){e.classList.contains("swiper-pagination-bullet-active")&&e.classList.add("viewed")}))}));var o=!1;gsap.set("[typewriter-form]",{opacity:0}),gsap.set('.thankyou [typewriter="on"]',{opacity:0}),gsap.set(".form-flex-left.cc--first",{opacity:0});const r=document.querySelector(".name-valid"),n=document.querySelector('input[name="Name"]'),a=document.querySelector("#name-error"),i=document.querySelectorAll(".user-name");r.addEventListener("click",(function(){const e=n.value;""===e.trim()||/\d/.test(e)?(a.classList.add("active"),n.classList.add("err"),t.allowSlideNext=!1):(a.classList.remove("active"),n.classList.remove("err"),t.allowSlideNext=!0,i.forEach((function(t){t.textContent=e})),t.allowSlideNext=!0,t.slideNext())}));document.querySelector('input[name="Email"]'),document.querySelector(".email-valid"),document.querySelector("#email-error");document.getElementById("email").addEventListener("input",(function(){const e=this.value,t=document.querySelector(".captcha");""!==e.trim()?(t.style.opacity="1",t.style.height="auto"):(t.style.opacity="0",t.style.height="0")}));document.querySelectorAll(".with-other").forEach((e=>{e.querySelector(".other").addEventListener("click",(()=>{const t=e.nextElementSibling;gsap.to(e,{x:"100%",autoAlpha:0,duration:.4}),gsap.set(t,{display:"block"}),gsap.to(t,{x:"0%",autoAlpha:1,duration:.4})}))})),$(".radio-button").on("click",(function(){$(this).addClass("selected").siblings().removeClass("selected")}));const l=.8;window.popupOpen=gsap.timeline({paused:!0,defaults:{ease:"power4.out",yoyoEase:!0,onStart:()=>gsap.set("body",{overflow:"hidden"}),onReverseComplete:()=>gsap.set("body",{overflow:"auto"})}}),popupOpen.to(".page-wrapper",{autoAlpha:0,filter:"blur(16px)",ease:"power3",duration:l/2}),popupOpen.to(".cta-btn-wr",{autoAlpha:0,x:"100%",duration:l},0),popupOpen.to(".menu_wrapper",{opacity:0,y:"-100%",duration:l},0),popupOpen.to(".menu-button",{opacity:0,y:"100%",duration:l},0),popupOpen.to(".angle-cross",{opacity:0,duration:2*l,ease:"elastic"},0),popupOpen.to(".frame-line",{rotateZ:0,y:0,margin:"0 0 0 0",duration:l},0),popupOpen.to(".frame-line.is--vert",{scaleY:0,duration:l},0),popupOpen.to(".frame-line.is--mid",{scaleX:0,duration:l},.5),popupOpen.to(".frame-top-bot_flex",{scaleX:0,duration:l},.5);document.querySelectorAll("[purpose='contact-form']").forEach((t=>{t.addEventListener("click",(()=>{gsap.to(window.camera.position,{z:8,y:3.5,ease:"power3",duration:2}),gsap.to(".form-swiper",{delay:.8,autoAlpha:1,duration:.4,display:"block",ease:"power4.out",onComplete:()=>{e()}}),popupOpen.play()}))}));document.querySelectorAll(".popup-close").forEach((e=>{e.addEventListener("click",(()=>{gsap.to(window.camera.position,{z:3,y:0,ease:"power3",duration:2}),gsap.to(".form-swiper",{autoAlpha:0,display:"none",ease:"power4.out",duration:.4}),popupOpen.timeScale(1.5).reverse()}))}));const s=document.querySelector(".form-trigger"),c=document.querySelector(".form-swiper .popup-close");s.addEventListener("click",(()=>{setTimeout((()=>{c.click()}),12e3)})),s.addEventListener("click",(()=>{const e=document.querySelector(".success-counter");target={val:12},gsap.to("#form-prev",{autoAlpha:0,duration:.3}),gsap.to(".swiper-pagination",{autoAlpha:0,duration:.3}),gsap.to(target,{duration:12,val:0,ease:"none",onUpdate:function(){e.textContent=`00:${target.val.toFixed(0).padStart(2,"0")}`}}),gsap.set('.thankyou [typewriter="on"]',{opacity:1});gsap.utils.toArray('.thankyou [typewriter="on"]').forEach((e=>{typewriter(e)}))}))}function loadScript(e,t){var o=document.createElement("script");o.src=e,o.onload=t,o.onerror=function(){},document.head.appendChild(o)}window.loadingManager=new THREE.LoadingManager;let preloader=document.querySelector(".preloader");const menuLinks=document.querySelectorAll(".menu-link");window.cases=gsap.utils.toArray(".case, .work"),gsap.config({nullTargetWarn:!1}),gsap.registerPlugin(TextPlugin),ScrollTrigger.defaults({immediateRender:!1});const breakPoint=991;let mm=gsap.matchMedia();window.baseSpeed=.02;let currentSpeed=baseSpeed;const globalState={isDesktop:!1,isMobile:!1};let currentState=globalState,firstLoad=!1;mm.add({isDesktop:`(min-width: ${breakPoint}px)`,isMobile:`(max-width: ${breakPoint-1}px)`},(e=>{const{isDesktop:t,isMobile:o}=e.conditions;globalState.isDesktop=t,globalState.isMobile=o,firstLoad&&window.location.reload()})),document.addEventListener("DOMContentLoaded",(()=>{firstLoad=!0,basicScene(),globalState.isDesktop&&(loadScript("https://assets.slater.app/slater/4562/19930.js",(function(){footerModel()})),loadScript("https://assets.slater.app/slater/4562/19933.js",(function(){desktopAnimations()}))),splitType(),onLoadSetup(),animations(),mobileMenu(),contactForm()}));